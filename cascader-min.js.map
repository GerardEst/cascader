{
  "version": 3,
  "sources": ["cascader.js"],
  "sourcesContent": ["let cols = 0\nlet rows = 0\nlet vertical_gap = 0\nlet horizontal_gap = 0\nlet element = null\nlet resizeObserver = null\nlet bricks = null\n\nexport default function(container_element, options){\n    cols = options.columns\n    horizontal_gap = options.horizontalGap || options.gap\n    vertical_gap = options.verticalGap || options.gap\n    element = container_element\n\n    if(!element.id) console.error('Cascader: Container needs an id')\n\n    bricks = document.querySelectorAll(`#${element.id} > *`)\n\n    element.style.position = 'relative'\n\n    console.log(\"Build cascade\")\n    \n    // Set the position of the bricks\n    positionBricks()\n\n    // Set container height determined by the largest col\n    setContainerHeight()\n\n    // Listen for size changes in bricks\n    listenSizeChanges()\n\n}\n\nexport function remove(){\n  console.log(\"Removing cascade\")\n  unlistenSizeChanges()\n\n  // Dejar los estilos como estaban\n  element.removeAttribute('style')\n  for(let brick of bricks) brick.removeAttribute('style')\n  \n}\n\n// Usa la Resize Observer API para detectar cambios de tama\u00F1o en cualquier elemento -> https://developer.mozilla.org/en-US/docs/Web/API/Resize_Observer_API\nfunction listenSizeChanges(){\n  resizeObserver = new ResizeObserver( () => {\n    console.log(\"Resized\")\n    positionBricks()\n    setContainerHeight()\n  })\n  for(let brick of bricks) resizeObserver.observe(brick)\n}\n\nfunction unlistenSizeChanges(){\n  resizeObserver.disconnect() \n}\n\nfunction positionBricks(){\n  for(let i=0; i<bricks.length; i++){\n    const brick = bricks[i]\n\n    const brick_row = Math.floor(i/cols)\n    const brick_width = 100/cols\n    const brick_col = i%cols\n    const gap_reduce = horizontal_gap*(cols-1)/cols\n    let brick_top = 0\n    if(brick_row > rows) rows = brick_row\n    \n    brick.style.position = 'absolute'\n    brick.setAttribute('row', brick_row)\n    brick.setAttribute('col', brick_col)\n    \n    brick.style.width = `calc(${brick_width}% - ${gap_reduce}px)`\n\n    brick.style.left = `calc(${brick_width*brick_col}% + ${horizontal_gap/cols * brick_col}px`\n\n    const bricks_in_col = element.querySelectorAll(`[col='${brick_col}']`)\n    \n    for(let brick_in_col of bricks_in_col){\n      if(brick_in_col.getAttribute('row') >= brick_row) continue\n\n      brick_top = brick_top + brick_in_col.offsetHeight\n      brick.style.top = `${brick_top+vertical_gap*brick_row}px`\n    }  \n  }\n}\n\nfunction setContainerHeight(){\n  let largest_col = 0\n  \n  for(let i=0; i<cols; i++){\n    const col = element.querySelectorAll(`[col='${i}']`)\n    \n    let total_height = 0\n    \n    for(let el of col){\n      let row = el.getAttribute('row')\n      let additional_gap = row < rows ? vertical_gap : 0\n      total_height = total_height + el.offsetHeight + additional_gap\n    }\n\n    if(total_height > largest_col) largest_col = total_height\n  }\n\n  element.style.height = largest_col+'px'\n}"],
  "mappings": "AAAA,GAAI,GAAO,EACP,EAAO,EACP,EAAe,EACf,EAAiB,EACjB,EAAU,KACV,EAAiB,KACjB,EAAS,KAEE,WAAS,EAAmB,EAAQ,CAC/C,EAAO,EAAQ,QACf,EAAiB,EAAQ,eAAiB,EAAQ,IAClD,EAAe,EAAQ,aAAe,EAAQ,IAC9C,EAAU,EAEN,EAAQ,IAAI,QAAQ,MAAM,iCAAiC,EAE/D,EAAS,SAAS,iBAAiB,IAAI,EAAQ,QAAQ,EAEvD,EAAQ,MAAM,SAAW,WAEzB,QAAQ,IAAI,eAAe,EAG3B,EAAe,EAGf,EAAmB,EAGnB,EAAkB,CAEtB,CAEO,YAAiB,CACtB,QAAQ,IAAI,kBAAkB,EAC9B,EAAoB,EAGpB,EAAQ,gBAAgB,OAAO,EAC/B,OAAQ,KAAS,GAAQ,EAAM,gBAAgB,OAAO,CAExD,CAGA,YAA4B,CAC1B,EAAiB,GAAI,gBAAgB,IAAM,CACzC,QAAQ,IAAI,SAAS,EACrB,EAAe,EACf,EAAmB,CACrB,CAAC,EACD,OAAQ,KAAS,GAAQ,EAAe,QAAQ,CAAK,CACvD,CAEA,YAA8B,CAC5B,EAAe,WAAW,CAC5B,CAEA,YAAyB,CACvB,OAAQ,GAAE,EAAG,EAAE,EAAO,OAAQ,IAAI,CAChC,GAAM,GAAQ,EAAO,GAEf,EAAY,KAAK,MAAM,EAAE,CAAI,EAC7B,EAAc,IAAI,EAClB,EAAY,EAAE,EACd,EAAa,EAAgB,GAAK,GAAG,EACvC,EAAY,EAChB,AAAG,EAAY,GAAM,GAAO,GAE5B,EAAM,MAAM,SAAW,WACvB,EAAM,aAAa,MAAO,CAAS,EACnC,EAAM,aAAa,MAAO,CAAS,EAEnC,EAAM,MAAM,MAAQ,QAAQ,QAAkB,OAE9C,EAAM,MAAM,KAAO,QAAQ,EAAY,QAAgB,EAAe,EAAO,MAE7E,GAAM,GAAgB,EAAQ,iBAAiB,SAAS,KAAa,EAErE,OAAQ,KAAgB,GACtB,AAAG,EAAa,aAAa,KAAK,GAAK,GAEvC,GAAY,EAAY,EAAa,aACrC,EAAM,MAAM,IAAM,GAAG,EAAU,EAAa,MAEhD,CACF,CAEA,YAA6B,CAC3B,GAAI,GAAc,EAElB,OAAQ,GAAE,EAAG,EAAE,EAAM,IAAI,CACvB,GAAM,GAAM,EAAQ,iBAAiB,SAAS,KAAK,EAE/C,EAAe,EAEnB,OAAQ,KAAM,GAAI,CAEhB,GAAI,GAAiB,AADX,EAAG,aAAa,KAAK,EACJ,EAAO,EAAe,EACjD,EAAe,EAAe,EAAG,aAAe,CAClD,CAEA,AAAG,EAAe,GAAa,GAAc,EAC/C,CAEA,EAAQ,MAAM,OAAS,EAAY,IACrC",
  "names": []
}
